# Архитектура программного комплекса изделия «Сириус»

## 1. Общая концепция

Архитектура построена по многоуровневой модульной модели
с разделением вычислительного ядра и пользовательского интерфейса.

Принята гибридная архитектура:

- Layered Architecture
- Event-driven interaction
- Model-based data exchange

## 2. Логическая структура системы

Система разделена на 5 уровней:
1. UI Layer
2. Presentation Model Layer
3. Core Layer
4. DSP Layer
5. Hardware Interface Layer

---

## 3. Описание уровней

### 3.1 Hardware Interface Layer

Назначение:
- Взаимодействие с аппаратными модулями.
- Получение сырых данных от РПУ.
- Получение данных об азимуте антенны.

Компоненты:
- DeviceController
- AzimuthProvider
- DataStreamAdapter

---

### 3.2 DSP Layer (Signal Processing)

Назначение:
- Цифровая обработка сигналов.
- Вычисление спектра.
- Детекция сигналов.
- Пеленгование.

Компоненты:
- FFTProcessor
- SignalDetector
- DirectionFinder
- SignalClassifier

Требования:
- Высокая производительность.
- Минимальная латентность.
- Отсутствие зависимостей от UI.

---

### 3.3 Core Layer

Назначение:
- Централизованная модель данных.
- Управление состоянием системы.
- Синхронизация потоков.

Компоненты:
- SignalDataModel
- TargetModel
- RecordingManager
- EventBus

Функция:
Обеспечивает передачу агрегированных данных
между DSP и UI.

---

### 3.4 Presentation Model Layer

Назначение:
- Адаптация данных для отображения.
- Подготовка структур для QML.

Принцип:
UI не получает сырые данные DSP.
UI получает только подготовленные модели.

---

### 3.5 UI Layer

Назначение:
- Визуализация.
- Управление режимами.
- Отображение пеленга.
- Табличный анализ.

Основные элементы:
- WaterfallView
- SpectrumView
- AntennaIndicator
- TargetTracker
- SignalTableView
- ControlPanel

UI не выполняет вычислений.

---

## 4. Потоки данных

### 4.1 Поток сигналов

RPU → Hardware Interface → DSP → Core → Presentation → UI

### 4.2 Поток пеленга

AzimuthProvider → DirectionFinder → TargetModel → AntennaIndicator

### 4.3 Поток записи

Core → RecordingManager → Storage

---

## 5. Асинхронная модель

Используется многопоточная архитектура:

Thread 1 — UI  
Thread 2 — DSP  
Thread 3 — Recording  

Передача данных осуществляется через:
- очереди сообщений
- сигнал-слот механизм Qt
- lock-free структуры (при необходимости)

---

## 6. Модель данных сигнала

SignalEntity:
- timestamp
- frequency
- bandwidth
- amplitude
- pulseWidth
- azimuth
- classification

TargetEntity:
- azimuth
- confidence
- signalId

---

## 7. Масштабируемость

Архитектура позволяет:

- Добавлять новые алгоритмы DSP.
- Добавлять новые формы визуализации.
- Подключать картографический модуль.
- Подключать сетевую передачу данных.

Без изменения существующих слоёв.

---

## 8. Обоснование архитектурного выбора

Выбор модульной многослойной архитектуры обусловлен:

1. Требованиями реального времени.
2. Большим объёмом обрабатываемых данных.
3. Необходимостью расширения функционала.
4. Интеграцией двух существующих программ в единое решение.
5. Требованием инженерной прозрачности для защиты НИР.

---

## 9. Критерии корректности архитектуры

Архитектура считается корректной, если:

- UI не зависит от DSP.
- DSP не знает о UI.
- Добавление нового визуального компонента
  не требует изменения алгоритмов обработки.
- Расширение диапазона частот
  не требует переработки интерфейса.
